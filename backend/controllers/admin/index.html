<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Create Campaign</title>

  <style>
    body {
      font-family: Arial, sans-serif;
      background: #f4f6f8;
      padding: 20px;
    }
    form {
      background: #fff;
      padding: 20px;
      max-width: 700px;
      margin: auto;
      border-radius: 8px;
    }
    h2 {
      text-align: center;
    }
    label {
      display: block;
      margin-top: 12px;
      font-weight: bold;
    }
    input, select, textarea {
      width: 100%;
      padding: 8px;
      margin-top: 5px;
    }
    textarea {
      resize: vertical;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      width: 100%;
      background: #007bff;
      color: #fff;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
  </style>
</head>
<body>

<form id="campaignForm" enctype="multipart/form-data">
  <h2>Create New Campaign</h2>

  <!-- BASIC -->
  <label>Campaign Name</label>
  <input type="text" name="name" required />

  <label>Client Organization Name</label>
  <input type="text" name="client" required />

  <label>Campaign Type</label>
  <select name="type" required>
    <option value="">Select</option>
    <option>Retailer Enrolment</option>
    <option>Display Payment</option>
    <option>Incentive Payment</option>
    <option>Others</option>
  </select>

  <!-- REGIONS -->
  <label>Regions (Ctrl / Cmd + Click)</label>
  <select id="regions" multiple required>
    <option>North</option>
    <option>South</option>
    <option>East</option>
    <option>West</option>
    <option>All</option>
  </select>

  <!-- STATES -->
  <label>States (Ctrl / Cmd + Click)</label>
  <select id="states" multiple required>
    <option>Delhi</option>
    <option>Haryana</option>
    <option>Rajasthan</option>
    <option>Maharashtra</option>
    <option>Uttar Pradesh</option>
  </select>

  <!-- DATES -->
  <label>Campaign Start Date</label>
  <input type="date" name="campaignStartDate" required />

  <label>Campaign End Date</label>
  <input type="date" name="campaignEndDate" required />

  <!-- TERMS -->
  <label>Terms & Conditions</label>
  <textarea name="termsAndConditions" rows="5" required></textarea>

  <!-- GRATIFICATION -->
  <label>Gratification Type</label>
  <select name="gratificationType">
    <option value="">Select</option>
    <option>Cash</option>
    <option>Gift</option>
    <option>Points</option>
    <option>Discount</option>
    <option>Others</option>
  </select>

  <label>Gratification Amount</label>
  <input type="number" name="gratificationAmount" />

  <label>Gratification Description</label>
  <input type="text" name="gratificationDescription" />

  <label>Gratification Conditions</label>
  <textarea name="gratificationConditions" rows="3"></textarea>

  <!-- BANNERS -->
  <label>Campaign Banners (Images)</label>
  <input type="file" name="banners" multiple accept="image/*" />

  <button type="submit">Create Campaign</button>
</form>

<script>
  document.getElementById("campaignForm").addEventListener("submit", async (e) => {
    e.preventDefault();

    const form = e.target;
    const formData = new FormData(form);

    // Convert multi-selects to JSON arrays
    const regions = Array.from(document.getElementById("regions").selectedOptions)
      .map(o => o.value);
    const states = Array.from(document.getElementById("states").selectedOptions)
      .map(o => o.value);

    formData.append("regions", JSON.stringify(regions));
    formData.append("states", JSON.stringify(states));

    // Send request
    const response = await fetch("http://localhost:5000/api/admin/campaigns", {
      method: "POST",
      headers: {
        Authorization: "Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpZCI6IjY5MDE5OGZjYmExNDFmZTcyZWJhMjA5ZiIsImVtYWlsIjoiYW51YmhhdnNyZGF2MjBAZ21haWwuY29tIiwicm9sZSI6ImFkbWluIiwiaWF0IjoxNzY3NjAzMTA1LCJleHAiOjE3Njc2ODk1MDV9.3F_0lgbr0M-Q7cE0SMKaGTaRNmCJVEin-giVY0CgGHE"
      },
      body: formData
    });

    const result = await response.json();
    alert(JSON.stringify(result, null, 2));
  });
</script>

</body>
</html>
